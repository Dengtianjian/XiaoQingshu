<import src="../template/author.wxml" />
<import src="../template/title.wxml" />
<import src="../template/attribute.wxml" />
<import src="../template/operate.wxml" />
<template name="common">
  <template is="author" data="{{ ...author }}"></template>
  <view class="post">
    <template is="title" data="{{ ...{ title } }}" />
    <view class="post-content">{{ content }}</view>
    <view class="post-images">
      <block wx:for="{{ images }}" wx:key="index">
        <image class="post-image-item" src="{{ item }}" mode="aspectFill" bind:tap="previewImage" data-index="{{ index }}"></image>
      </block>
    </view>
    <template is="attribute" data="{{ ...{ sort,topic } }}" />
    <template is="operate" data="{{ ...{ isFavorite,isLike,likes } }}" />
    <view class="post-publish-date">{{ date }}</view>
  </view>
  <view class="comment">
    <view class="comment-title">评论</view>
    <block wx:for="{{ comments }}" wx:key="commentArrayIndex" wx:for-index="commentArrayIndex" wx:for-item="commentArray">
      <view class="comment-list">
        <block wx:for="{{ commentArray }}" wx:key="index">
          <view class="comment-item">
            <CommentItem comment="{{ item }}" />
            <view class="comment-view-reply" bind:tap="showAllCommentReply" data-index="{{ index }}" data-arrayindex="{{ commentArrayIndex }}">
              查看回复
            </view>
          </view>
        </block>
      </view>
    </block>
  </view>
  <view class="comment-post-tips" bind:tap="showCommentPopup" data-type="postComment">评论一个</view>
  <view class="comment-post-placeholder"></view>
</template>